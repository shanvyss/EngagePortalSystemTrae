<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Register User</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>Create New User</h1>
            <a href="{{ url_for('dashboard') }}" class="back-btn">Back to Dashboard</a>
        </header>
        <form method="POST" action="/register">
            <div class="form-group">
                <label for="username">Username:</label>
                <input type="text" id="username" name="username" placeholder="Username" required>
            </div>
            
            <div class="form-group">
                <label for="password">Password:</label>
                <input type="password" id="password" name="password" placeholder="Password" required>
            </div>
            
            <div class="form-group">
                <label for="role">Role:</label>
                <select id="role" name="role">
                    <option value="student">Student</option>
                    <option value="teacher">Teacher</option>
                    <option value="admin">Admin</option>
                </select>
            </div>
            
            <div class="form-group" id="classroom-selection">
                <label for="classroom_id">Assign to Classroom (for Students and Teachers):</label>
                <select id="classroom_id" name="classroom_id">
                    <option value="">-- Select Classroom --</option>
                    {% for classroom in classrooms %}
                    <option value="{{ classroom.id }}">{{ classroom.name }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <button type="submit" class="btn">Create User</button>
        </form>
        
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <ul class="flashes">
                {% for category, message in messages %}
                    <li class="{{ category }}">{{ message }}</li>
                {% endfor %}
                </ul>
            {% endif %}
        {% endwith %}
    </div>
    
    <script>
        // Show/hide classroom selection based on role
        document.getElementById('role').addEventListener('change', function() {
            var classroomDiv = document.getElementById('classroom-selection');
            if (this.value === 'student' || this.value === 'teacher') {
                classroomDiv.style.display = 'block';
            } else {
                classroomDiv.style.display = 'none';
            }
        });
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            var roleSelect = document.getElementById('role');
            var classroomDiv = document.getElementById('classroom-selection');
            
            if (roleSelect.value === 'student' || roleSelect.value === 'teacher') {
                classroomDiv.style.display = 'block';
            } else {
                classroomDiv.style.display = 'none';
            }
        });
    </script>
</body>
</html>